<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pd.mapper.IUserMapper">
    <!--管理员查看所有用户 -->
    <select id="checkUserList" resultType="com.pd.pojo.User">
		SELECT * FROM TB_USERS
	</select>

    <!--根据userId查询用户基本信息TB_USERS、TB_ACCOUNT-->
    <select id="selectByIdUser" resultMap="oneUserMassage">
        SELECT tu.user_id,tu.user_name,tu.telephone_number,tu.create_time,ta.account_address,ta.capital_account_number,ta.eal,ta.account_id FROM (SELECT * FROM TB_USERS WHERE user_id=#{userId}) tu
        JOIN
        TB_ACCOUNT ta
        ON
        tu.user_id = ta.user_id
    </select>

    <resultMap id="oneUserMassage" type="com.pd.pojo.User">
        <id property="userId" column="user_id"></id>
        <result property="userName" column="user_name"></result>
        <result property="telephoneNumber" column="telephone_number"></result>
        <result property="createTime" column="create_time"></result>
        <association property="account" javaType="com.pd.pojo.Account">
            <id property="userId" column="user_id"></id>
            <result property="accountAddress" column="account_address"></result>
            <result property="capitalAccountNumber" column="capital_account_number"></result>
            <result property="eal" column="eal"></result>
        </association>
    </resultMap>
</mapper>